package com.arnold.server.model;

import java.util.ArrayList;
import java.util.List;

import com.arnold.server.bean.request.RequestBackStageCrew;
import com.arnold.server.model.base.BaseBackstagecrew;
import com.jfinal.plugin.activerecord.Page;

/**
 * Generated by JFinal.
 */
@SuppressWarnings("serial")
public class Backstagecrew extends BaseBackstagecrew<Backstagecrew> {
	public static final Backstagecrew dao = new Backstagecrew();
	
	private final String tableName = "tb_backstagecrew";
	
	/*public Page<Backstagecrew> pageBackstageCrew(int pageNumber, int pageSize) {
		
		String select = "SELECT *";
		String sqlExceptSelect = " From " + tableName + "";
		
		return dao.paginate(pageNumber, pageSize, select, sqlExceptSelect);
	}*/
	
	public Page<Backstagecrew> pageBackstageCrew(Integer pageNumber,
			Integer pageSize, RequestBackStageCrew requestBean) {
		String select = "SELECT *";
//		String sqlExceptSelect = " From " + tableName + "";
		StringBuilder sqlExceptSelect = new StringBuilder(" From " + tableName);
		
		List<String> paramList = new ArrayList<String>();
		
		if(null!=requestBean){
			sqlExceptSelect.append(" where 1=1 ");
			
			if(null!=requestBean.getLoginTime() && requestBean.getLoginTime().length()>0){
				sqlExceptSelect.append(" and lastLoginTime like '").append(requestBean.getLoginTime()).append("%'");
			}
			if(null!=requestBean.getKeyWord() && requestBean.getKeyWord().length()>0){
				if(requestBean.getKeyWord().length()==11){//视为手机号，快速修复bug
					sqlExceptSelect.append(" and phone = ?");
				}else{
					sqlExceptSelect.append(" and name = ?");
				}
				paramList.add(requestBean.getKeyWord());
			}
		}
		
		return dao.paginate(pageNumber, pageSize, select, sqlExceptSelect.toString(), paramList.toArray());
	}

	public Backstagecrew findByUserId(String userId) {
		String sql = "SELECT * FROM " + tableName + " WHERE userId=?";
		// TODO Auto-generated method stub
		return dao.findFirst(sql, userId);
	}

}
